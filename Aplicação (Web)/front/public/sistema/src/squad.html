<!DOCTYPE html>
<html lang="pt-br">

<meta http-equiv="content-type" content="text/html;charset=UTF-8" />

<head>
    <title>PMSys_ - Dashboards</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" href="../assets/fonts/fontawesome/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="../assets/css/squad.css">
    <link rel="stylesheet" href="../assets/css/modalCustom.css">
    <link rel="stylesheet" href="../assets/plugins/animation/css/animate.min.css">
    <link href="../assets/css/feather.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/default.css">
    <link rel="icon" href="../../img/logo.png" type="image/icon"> 
    <link rel="shortcut icon" href="../../img/logo.png" type="image/icon">
    <script src="https://code.iconify.design/1/1.0.3/iconify.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_o5hd5vvqpoqiwwmi.css">
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<body>

    <div id="nav"></div>

    <div class="pcoded-main-container">
        <div class="pcoded-wrapper">
            <div class="pcoded-content">
                <div class="pcoded-inner-content">

                    <div class="page-header">
                        <div class="page-block">
                            <div class="row align-items-center">
                                <div class="col-md-12">
                                    <div class="page-header-title">
                                        <h5 class="m-b-10">Squads</h5>
                                    </div>
                                    <ul class="breadcrumb">
                                        <li class="breadcrumb-item"><a href="index.html" title="Voltar para home"><i data-feather="home"
                                                    width="13" class="feather icon-anchor"></i></a></li>
                                        <li class="breadcrumb-item"><a href="#!">Squads</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="main-body">
                        <div class="page-wrapper">
                            <!-- Div onde serão inseridos os cards de cada Squad -->
                            <div id="conteudo" class="card-group">
                                <!-- <div class="col-md-4">
                                    <div class="card card-squad">
                                        <div class="card-body" onclick="criarFuncionarios()" data-toggle="modal"
                                            data-target="#modalSquad" data-squad="Alpha">
                                            <i class="status" style="background:#55DD55"></i>
                                            <span>ALPHA</span>
                                            <i data-feather="users" class="feather icon-anchor background"></i>
                                        </div>
                                    </div>
                                </div> -->
                            </div>
                        </div>
                        <!-- Modal de detalhes do squad -->
                        <div id="modalSquad" class="modalCustom" tabindex="-1" role="dialog"
                            aria-labelledby="modalSquadLabel" aria-hidden="true">
                            <div class="modalCustom-content" role="document">
                                <div class="modalCustom-info">
                                    <div class="modalCustom-header">
                                        <span class="modalCustom-title" id="modalSquadLabel">
                                            Squad
                                        </span>
                                        <span id="modalCustom-status" class="modalCustom-status"></span>
                                    </div>
                                    <div class="modalCustom-info-text">
                                        <span class="modalCustom-subtitle">Objetivo:</span>
                                        <span class="modalCustom-description">Squad  trabalhando no projeto 12467, em desenvolvimento de uma aplicação WEB para gerenciamento de lojas.</span>
                                        <span class="modalCustom-subtitle">Descrição:</span>
                                        <span class="modalCustom-description">Squad Alpha alocado no 8° andar da empresa com 7 intregantes.</span>
                                    </div>
                                </div>
                                <div class="modalCustom-func">
                                    <div id="lista-superior" class="modalCustom-superior">
                                        <!-- Div preenchida com superiores -->
                                    </div>
                                    <div id="lista-funcionarios" class="modalCustom-funcionarios">
                                        <!-- Div preenchida com funcionarios -->
                                    </div>
                                </div>
                                <!-- <div class="modal-header">
                                    <h5 class="modal-title" id="modalSquadLabel">Squad Alpha</h5>
                                    <div>
                                        <a data-dismiss="modal" class="close" aria-label="Close">
                                            <span aria-hidden="true">×</span>
                                        </a>
                                        <a href="cadastrar-squad.html" class="close squad-edit">
                                            <i data-feather="settings" width="14px" height="14px"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <h6>Objetivo:</h6>
                                            <p>Squad alocado no projeto 12467, em desenvolvimento de uma
                                                aplicação
                                                WEB para gerenciamento de lojas.</p>
                                            <h6>Descrição:</h6>
                                            <p>Squad Alpha alocado no 8° andar da empresa com 7 intregantes.</p>
                                        </div>
                                        <div class="col-md-8">
                                            <div
                                                class="table-responsive squad-modal-lista-funcionarios border-left">
                                                <table class="table table-hover">
                                                    <thead>
                                                        <tr>
                                                            <th>Funcionário</th>
                                                            <th>Status</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="funcionariosSquad">


                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                    <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-dismiss="modal">Close</button>
                                    <button type="button" class="btn btn-primary">Save changes</button>
                                </div> -->
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="botoes-flutuantes-container">
            <a href="cadastrar-squad.html" class="botao-flutuante" title="Adicionar Squad">
                <i data-feather="plus" width="35px" height="35px" ></i>
            </a>
        </div>
    </div>

</body>

</html>
<!-- Script para criar cards dos squads no array, simulando o retorno da API -->
<script>
    const squads = [{
        nome: "Alpha",
        status: "danger",
    },
    {
        nome: "Beta",
        status: "success",
    },
    {
        nome: "Charlie",
        status: "warning",
    },
    {
        nome: "Delta",
        status: "info",
    }
    ]
    let divs = "";
    squads.map(squad => {
        divs += `
                <div class="col-md-3">
                    <div class="card card-squad">
                        <div class="card-body" onclick="criarFuncionarios()" data-toggle="modal"
                            data-target="#modalSquad" data-squad='${JSON.stringify(squad)}'>
                            <i class="status" style="background:var(--${squad.status})"></i>
                            <span>${squad.nome}</span>
                            <i data-feather="users" class="feather icon-anchor background"></i>
                        </div>
                    </div>
                </div>
            `
    });
    document.getElementById("conteudo").innerHTML = divs;
</script>
<!-- Script para gerar funcionarios aleatorios para testes -->
<script>
    function criarFuncionarios() {
        const numero = Math.floor(Math.random() * 10) +
            2;
        const horarios = [];
        for (i = 0; i < 10; i++) {
            horarios.push("08:5" + i)
            horarios.push("09:0" + i)
            horarios.push("09:1" + i)
        };
        const homensNomes = ["José", "Enzo", "Carlos",
            "Gustavo", "Gabriel", "Alexandre",
            "Henrique", "Lucas"
        ];
        const mulheresNomes = ["Beatriz", "Alice",
            "Melissa", "Anna", "Raquel"
        ];
        const sobrenome = ["Melo", "Sousa", "Silva",
            "Rocha", "Correia", "Castro", "Ribeiro",
            "Gomes", "Dias", "Azevedo", "Ferreira",
            "Cunha", "Cardoso"
        ];
        const cargos = ["DESENVOLVEDOR BACKEND", 
            "DESENVOLVEDOR FRONTEND", 
            "GERENTE DE PROJETOS",];

        let funcionarios = "";
        let superior = "";

        for (i = 0; i < numero; i++) {
            const genero = Math.floor(Math.random() *
                2);
            const funcionario = {
                avatar: genero + 1,
                nome: genero ? homensNomes[Math
                    .floor(Math.random() *
                        homensNomes.length)] :
                    mulheresNomes[Math.floor(Math
                        .random() *
                        mulheresNomes.length)]
                        +" "+ sobrenome[Math.floor(Math
                    .random() * sobrenome
                        .length)] + " " + sobrenome[
                    Math.floor(Math.random() *
                        sobrenome.length)],
                status: Math.floor(Math.random() *
                    10) ? "Online desde as " +
                    horarios[Math.floor(Math
                        .random() * horarios
                            .length)] : "Offline",
                cargo: 
                    cargos[Math.floor(Math
                        .random() *
                        cargos.length)],
            }
            i===0 ? 
            superior += `
                <div class="funcionario">
                    <div class="funcionario-avatar" title="${funcionario.status}">
                        <img class="rounded-circle funcionario-foto success"
                            src="../assets/images/user/avatar-${funcionario.avatar}.jpg"
                            alt="activity-user">
                        <div class="funcionario-status success"></div>
                    </div>
                    <span class="funcionario-nome" title="${funcionario.nome}">${funcionario.nome}</span>
                    <span class="funcionario-cargo">${Math.floor(Math.random()*2)? 'Supervisor':'Gerente'}</span>
                </div>
            `
            :
            funcionarios += `
                <div class="funcionario">
                    <div class="funcionario-avatar" title="${funcionario.status}">
                        <img class="rounded-circle funcionario-foto success"
                            src="../assets/images/user/avatar-${funcionario.avatar}.jpg"
                            alt="activity-user">
                        <div class="funcionario-status success"></div>
                    </div>
                    <span class="funcionario-nome" title="${funcionario.nome}">${funcionario.nome}</span>
                    <span class="funcionario-cargo">${funcionario.cargo}</span>
                </div>
            `;
        }
        document.getElementById('lista-funcionarios')
            .innerHTML = funcionarios;
        document.getElementById('lista-superior')
            .innerHTML = superior;

    }
</script>
<script>
    $('#modalSquad').on('show.bs.modal', function (event) {
        var button = $(event.relatedTarget);
        var squad = button.data('squad');
        var modal = $(this);
        modal.find('.modalCustom-title').text(`Squad ${squad.nome}`);
        modal.find('#modalCustom-status').removeClass();
        modal.find('#modalCustom-status').addClass(`modalCustom-status ${squad.status}`);
    })
</script>

<script type="text/javascript">
    $(document).ready(function () {
        $('#nav').load('barra-lateral.html', () => $("#squadId").addClass("active"))
    });
</script>
<!-- Bootstrap -->
<script src="../assets/plugins/bootstrap/js/bootstrap.min.js"></script>
<!-- Funções menu lateral -->
<script src="../assets/js/vendor-all.min.js"></script>
<script>
    feather.replace();
</script>